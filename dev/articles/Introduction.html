<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ctxR: Utilities for Interacting with the CTX APIs in R • ctxR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ctxR: Utilities for Interacting with the CTX APIs in R">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ctxR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Bioactivity.html">ctxR: Bioactivity API</a></li>
    <li><a class="dropdown-item" href="../articles/Chemical.html">ctxR: Chemical API</a></li>
    <li><a class="dropdown-item" href="../articles/Exposure.html">ctxR: Exposure API</a></li>
    <li><a class="dropdown-item" href="../articles/Hazard.html">ctxR: Hazard API</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction.html">ctxR: Utilities for Interacting with the CTX APIs in R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/ctxR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>ctxR: Utilities for Interacting with the CTX APIs in R</h1>
                        <h4 data-toc-skip class="author">US EPA’s Center
for Computational Toxicology and Exposure <a href="mailto:ccte@epa.gov" class="email">ccte@epa.gov</a>
</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/ctxR/blob/dev/vignettes/Introduction.Rmd" class="external-link"><code>vignettes/Introduction.Rmd</code></a></small>
      <div class="d-none name"><code>Introduction.Rmd</code></div>
    </div>

    
    
<style type="text/css">
@media screen and (max-width: 1000px) {
  .tablet-hide {
    display: none;
  }

  #content {
    margin-left: 0;
    padding: 1em;
  }

  #content.shift {
    position: relative;
    min-width: 100%;
    left: 300px;
    top: 0;
    height: 100%;
    overflow: hidden;
  }

  #sidebar {
    font-size: 120%;
    left: -300px;
    width: 300px;
  }

  #content.shift #sidebar {
    font-size: 120%;
    left: 0;
    width: 300px; /* was  75% */
  }
  #nav-top {
    display: inline-block;
  }
  #postamble {
    left: -300px;
  }
  #postamble.shift {
    font-size: 90%; /* was 110%*/
    left: 0;
    width: 100%; /* was 75%*/
  }
  #main .nav-pills {
    margin-left: 0px;
  }
  #main .nav-pills li {
    margin-left: 10px !important;
  }
  #main .nav-pills > li > a {
    padding: 2px 8px !important;
    margin-right: 0px !important;
  }
}

#content {
  max-width: 850px;
}

@media (min-width: 1450px) {
  #content {
    width: 1150px;
    margin: 0 auto;
  }

  #sidebar {
    position: fixed;
    left: 50%;
    width: 300px;
    transform: translateX(-725px);
  }
}

@media screen and (max-width: 768px) {
  img {
    max-width: 100%;
    width: auto;
  }
}

/* colors */

:root {
  --light-tone: #a6b5c6;
  --pale-tone: #5a7b9c;
  --strong-tone: #003366;
  --brighter-tone: #303f9f;
  --light-gray: #f6f6f6;
}
div.sourceCode::before {
  content: "Code [" counter(counter-rchunks) "]: ";
  display: inline;
  position: absolute;
  left: -5em;
  font-size: 0.7em;
  color: var(--brighter-tone);
}
#nav-top span.glyphicon {
  color: var(--pale-tone);
}
#postamble {
  background: var(--pale-tone);
  border-top: solid 10px var(--pale-tone);
}
#postamble .date {
  color: white;
}
.title {
  text-align: center;
  color: var(--strong-tone);
}
.subtitle {
  color: var(--strong-tone);
}
h1,
h2,
h3,
h4,
h5,
h6,
legend {
  color: var(--pale-tone);
}
#main :not(.leaflet-control) > a {
  color: var(--pale-tone);
  background-image: var(--pale-tone);
}
#sidebar h2 {
  background-color: var(--pale-tone);
}
#main .nav-pills > li.active > a,
#main .nav-pills > li.active > a:hover,
#main .nav-pills > li.active > a:focus {
  background-color: var(--pale-tone);
}
#sidebar #toc,
#sidebar {
  background-color: var(--light-gray);
  color: black;
}
#sidebar #toc ul li a:hover {
  background-color: var(--light-tone);
  color: white;
}
# toc ul.nav li.active ul li.active a {
  background-color: var(--light-tone);
}
code {
  color: var(--strong-tone);
}
#sidebar a {
  color: black;
}

.scroll-200 {
  max-height: 200px;
  overflow-y: auto;
}

.scroll-300 {
  max-height: 300px;
  overflow-y: auto;
}

.noticebox {
  padding: 1em;
  background: lightgray;
  color: blue;
  border: 2px solid black;
  border-radius: 10px;
}
</style>
<p><a href="https://cran.r-project.org/web/packages/ctxR/index.html" class="external-link"><img src="Pictures%2FctxR_hex.png" width="200" align="right" style="float: right; margin-left: 10px; margin-bottom: 10px;"></a></p>
<div class="section level2">
<h2 id="introduction-to-the-ccd">Introduction to the CCD<a class="anchor" aria-label="anchor" href="#introduction-to-the-ccd"></a>
</h2>
<p>Accessing chemical data is a vital step in many workflows related to
chemical, biological, and environmental modeling. While there are many
resources available from which one can pull data, the <a href="https://comptox.epa.gov/dashboard/" class="external-link">CompTox Chemicals
Dashboard</a> (CCD), built and maintained by the United States
Environmental Protection Agency, is particularly well-designed and
suitable for these purposes. Originally introduced in <a href="https://jcheminf.biomedcentral.com/articles/10.1186/s13321-017-0247-6" class="external-link">The
CompTox Chemistry Dashboard: a community data resource for environmental
chemistry</a>, the CCD contains information on over 1.2 million
chemicals as of May 2024 and has been cited 612 times according to
CrossRef. To learn more about the CCD, please visit the page <a href="https://www.epa.gov/comptox-tools/comptox-chemicals-dashboard-about" class="external-link">About
CCD</a>.</p>
<p>The CCD includes chemical information from many different domains,
including physicochemical, environmental fate and transport, exposure,
usage, <em>in vivo</em> toxicity, and <em>in vitro</em> bioassay data.
For information on data sources and current versions, please review the
<a href="https://www.epa.gov/comptox-tools/comptox-chemicals-dashboard-release-notes" class="external-link">CCD
Release Notes</a>. It provides a graphical user interface that allows
for an interactive user experience and is easy to navigate. As such,
users can explore the data available on the CCD without any programming
background.</p>
<p>The CCD can be queried for one chemical at a time or using batch
search.</p>
<div class="section level3">
<h3 id="searching-one-chemical-at-a-time-single-substance-search">Searching one chemical at a time (single-substance search)<a class="anchor" aria-label="anchor" href="#searching-one-chemical-at-a-time-single-substance-search"></a>
</h3>
<p>In single-substance search, the user enters a full or partial
chemical identifier (name, CASRN, InChiKey, or DSSTox ID) into a search
box on the CCD homepage. Autocomplete can provide a list of possible
matches. Figure 1 shows an example: the CCD landing page for the
chemical <a href="https://comptox.epa.gov/dashboard/chemical/invitrodb/DTXSID7020182" class="external-link">Bisphenol
A</a>. This page is generated for Bisphenol A and links to but does not
represent other chemicals. Each chemical in the CCD has its own page
similar to this, with varying levels of accessible based on the
information that is available.</p>
<center>
<div class="float">
<img src="Pictures%2FCCD_BPA_page.png" alt="Figure 1: Bisphenol A CCD landing page"><div class="figcaption"><font style="font-size:15px"><i>Figure 1:
Bisphenol A CCD landing page</i></font></div>
</div>
</center>
<p>The different domains of data available for this chemical are shown
by the tabs on the left side of the page: for example, “Physchem Prop.”
(physico-chemical properties), “Env. Fate/Transport” (environmental fate
and transport data), and “Hazard Data” (<em>in vivo</em> hazard and
toxicity data), among others.</p>
</div>
<div class="section level3">
<h3 id="batch-search">Batch search<a class="anchor" aria-label="anchor" href="#batch-search"></a>
</h3>
<p>In <a href="https://comptox.epa.gov/dashboard/batch-search" class="external-link">batch
search</a>, the user enters a list of search inputs, separated by new
lines, into a search box. The user selects the type(s) of inputs by
selecting one or more checkboxes – include chemical identifiers,
monoisotopic masses, or molecular formulas. Then, the user selects
“Display All Chemicals” to display the list of substances matching the
batch-search inputs, or “Choose Export Options” to choose options for
exporting the batch-search results as a spreadsheet. The exported
spreadsheet may include data from most of the domains available on an
individual substance’s CCD page.</p>
<center>
<div class="float">
<img src="Pictures%2FCCD_Batch_Search.png" alt="Figure 2: CCD Batch Search"><div class="figcaption"><font style="font-size:15px"><i>Figure 2: CCD
Batch Search</i></font></div>
</div>
</center>
<p>The user can download the selected information in various formats,
such as Excel (.xlsx), comma-separated values (.csv), or different types
of chemical table files (.e.g, MOL).</p>
<center>
<div class="float">
<img src="Pictures%2FCCD_Batch_Search_customize_export_results.png" alt="Figure 3: CCD Batch Search Customized Export"><div class="figcaption"><font style="font-size:15px"><i>Figure 3: CCD
Batch Search Customized Export</i></font></div>
</div>
</center>
<p>The web interface for batch search only allows input of 10,000
identifiers at a time. If a user wants to retrieve information for more
than 10,000 chemicals, identifiers will need to be separated into
multiple batches and searched separately.</p>
</div>
<div class="section level3">
<h3 id="challenges-of-web-based-dashboard-search">Challenges of web-based dashboard search<a class="anchor" aria-label="anchor" href="#challenges-of-web-based-dashboard-search"></a>
</h3>
<p>Practicing researchers may follow a workflow that looks something
like this:</p>
<ol style="list-style-type: decimal">
<li>Start with a dataset that includes your chemical identifiers of
interest. These may include chemical names, Chemical Abstract Service
Registry Numbers (CASRNs), Distributed Searchable Structure-Toxicity
Database (DSSTox) identifiers, or InChIKeys.</li>
<li>Export the chemical identifiers to a spreadsheet. Often, this is
done by importing the data into an environment such as R or Python, in
order to do some data wrangling (e.g., to select only the unique
substance identfiers; to clean up improperly-formatted CASRNs; etc.).
Then, the identifiers are saved in a spreadsheet (an Excel, .csv, or
.txt file), one chemical identifier per row.</li>
<li>Copy and paste the chemical identifiers from the spreadsheet into
the CCD Batch Search box. If there are more than 10,000 total chemical
identifiers, divide them into batches of 10,000 or less, and search each
batch separately.</li>
<li>Choose your desired export options on the CCD Batch Search
page.</li>
<li>Download the exported spreadsheet of CCD data. By default, the
downloaded spreadsheet will be given a file name that includes the
timestamp of the download.</li>
<li>Repeat steps 3-5 for each batch of 10,000 identifiers produced in
step 2.</li>
<li>Import the downloaded spreadsheet(s) of CCD data into the analysis
tool you are using (e.g. R or Python).</li>
<li>Merge the table(s) of downloaded CCD data with your original dataset
of interest.</li>
<li>Proceed with research-related data analysis using the chemical data
downloaded from the CCD (e.g., statistical modeling, visualization,
etc.)</li>
</ol>
<p>Because each of these workflow steps requires manual interaction with
the search and download process, the risk of human error inevitably
creeps in. Here are a few real-world possibilities (the authors can
neither confirm nor deny that they have personally committed any of
these errors):</p>
<ul>
<li>Researchers could copy/paste the wrong identifiers into the CCD
batch search, especially if more than 10,000 identifiers need to be
divided into separate batches.</li>
<li>Chemical identifiers could be corrupted during the process of
exporting to a spreadsheet.
<ul>
<li>If a researcher opens and resaves a CSV file using Microsoft Excel,
any information that appears to be in date-like format will be
automatically converted to a date (unless the researcher has the most
recently-updated version of Excel and has selected the option in
Settings that will stop Excel from auto-detecting dates). This behavior
has long been identified as a problem in genomics, where gene names can
appear date-like to Excel (Abeysooriya et al. 2021). It also affects
cheminformatics, where chemical identifiers can appear date-like to
Excel. For example, the valid CASRN “1990-07-4” would automatically be
converted to “07/04/1990” (if Excel is set to use MM/DD/YYYY date
formats). CCD batch search cannot recognize “07/04/1990” as a valid
chemical identifier and will be unable to return any chemical data.</li>
</ul>
</li>
<li>Researchers could accidentally rename a downloaded CCD data file to
overwrite a previous download, e.g. when searching multiple batches of
identifiers.</li>
<li>Researchers could mistakenly import the wrong CCD download file back
into their analysis environment e.g. when searching multiple batches of
identifiers.</li>
</ul>
<p>Moreover, the manual stages of this kind of workflow are also
non-transparent and not easily reproducible. Utilizing APIs for data
exploration and retrieval can alleviate these concerns.</p>
</div>
</div>
<div class="section level2">
<h2 id="introduction-to-the-ctx-apis">Introduction to the CTX APIs<a class="anchor" aria-label="anchor" href="#introduction-to-the-ctx-apis"></a>
</h2>
<p>Recently, the <a href="https://www.epa.gov/aboutepa/about-center-computational-toxicology-and-exposure-ccte" class="external-link">US
EPA’s Center for Computational Toxicology and Exposure (CCTE)</a>
developed a set of Application Programming Interfaces (APIs) that allows
programmatic access to the CCD, bypassing the manual steps of the
web-based batch search workflow. APIs effectively automate the process
of accessing and downloading the data that populates the CCD.</p>
<p>The <a href="https://www.epa.gov/comptox-tools/computational-toxicology-and-exposure-apis" class="external-link">Computational
Toxicology and Exposure (CTX) APIs</a> are publicly available at no cost
to the user. However, in order to use the CTX APIs, users must have a
individual API key. The API key uniquely identifies the user to the CCD
servers and verifies that you have permission to access the database.
Getting an API key is free, but requires contacting the API support team
at <a href="mailto:ccte_api@epa.gov">ccte_api@epa.gov</a>.</p>
<p>The APIs are organized into sets of “endpoints” by data domains:
<code>Chemical</code>, <code>Hazard</code>, and
<code>Bioactivity</code>. An endpoint provides access to a specific set
of information and data, e.g. physical-chemical properties for a
chemical that the user specifies. A view from the <a href="https://api-ccte.epa.gov/docs/chemical.html" class="external-link">Chemical API</a> web
interface is pictured below.</p>
<center>
<div class="float">
<img src="Pictures%2FCTX_Chemical_API_endpoints.png" alt="Figure 4: CTX API Chemical Endpoints"><div class="figcaption"><font style="font-size:15px"><i>Figure 4: CTX
API Chemical Endpoints</i></font></div>
</div>
</center>
<p>On the left side of each domain’s web interface page, there will be
several different tabs listed depending on information requests
available within the domain. In Figure 4, the
<code>Chemical Details Resource</code> endpoint provides basic chemical
information; the <code>Chemical Property Resource</code> endpoint
provides more comprehensive physico-chemical property information; the
<code>Chemical Fate Resource</code> endpoint provides chemical fate and
transport information; and so on.</p>
<div class="section level3">
<h3 id="authentication">Authentication<a class="anchor" aria-label="anchor" href="#authentication"></a>
</h3>
<p><code>Authentication</code>, found in upper left tab on each web
interface page, is required to use the APIs. To authenticate themselves
in the API web interface, the user must input their unique API key.</p>
<center>
<div class="float">
<img src="Pictures%2FCTX_API_Key_authentication.png" alt="Figure 5: API Key Authentication"><div class="figcaption"><font style="font-size:15px"><i>Figure 5: API
Key Authentication</i></font></div>
</div>
</center>
</div>
<div class="section level3">
<h3 id="request-construction">Request Construction<a class="anchor" aria-label="anchor" href="#request-construction"></a>
</h3>
<p>APIs effectively automate the process of accessing and downloading
the data that populates the CCD. APIs do this via requests using the
Hypertext Transfer Protocol (HTTP) that enables communication between
clients (e.g. your computer) and servers (e.g. the CCD).</p>
<p>In the CTX API web interface, the colored boxes next to each endpoint
indicate the type of the associated HTTP method. <span style="color:blue">GET</span> is used to request data from a specific
web resource (e.g. a specific URL); <span style="color:green">POST</span> is used to send data to a server to
create or update a web resource. For the CTX APIs, <span style="color:green">POST</span> requests are used to perform multiple
(batch) searches in a single API call; <span style="color:blue">GET</span> requests are used for non-batch
searches.</p>
<p>You do not need to understand the details of POST and GET requests in
order to use the API. Let’s consider constructing an API request to
<code>Get data by dtxsid</code> under the
<code>Chemical Details Resource</code>.</p>
<center>
<div class="float">
<img src="Pictures%2FGet_Data_by_DTXSID_TOP.png" alt="Figure 6: Get Details by DTXSID"><div class="figcaption"><font style="font-size:15px"><i>Figure 6: Get
Details by DTXSID</i></font></div>
</div>
</center>
<p>The web interface has two subheadings:</p>
<ul>
<li>
<strong>Path Parameters</strong> contain user-specified parameters
that are required in order to tell the API what URL (web address) to
access. In this case, the required parameter is a string for the DTXSID
identifying the chemical to be searched.</li>
<li>
<strong>Query-String Parameters</strong> contain user-specific
parameters (usually optional) that tell the API what specific type(s) of
information to download from the specified URL. In this case, the
optional parameter is a <code>projection</code> parameter, a string that
can take one of five values (<code>chemicaldetailall</code>,
<code>chemicaldetailstandard</code>, <code>chemicalidentifier</code>,
<code>chemicalstructure</code>, <code>ntatoolkit</code>). Depending on
the value of this string, the API can return different sets of
information about the chemical. If the <code>projection</code> parameter
is left blank, then a default set of chemical information is
returned.</li>
</ul>
<p>The default return format is displayed below and includes a variety
of fields with data types represented.</p>
<center>
<div class="float">
<img src="Pictures%2FGet_Data_by_DTXSID_BOTTOM.png" alt="Figure 7: Get Details by DTXSID, Return Format"><div class="figcaption"><font style="font-size:15px"><i>Figure 7: Get
Details by DTXSID, Return Format</i></font></div>
</div>
</center>
<p>Pictured below is an example of returned Details for Bisphenol A with
the <code>chemicaldetailstandard</code> value for
<code>projection</code> selected.</p>
<center>
<div class="float">
<img src="Pictures%2FBPA_chemicaldetailstandard.png" alt="Figure 8: Returned Details for Bisphenol A"><div class="figcaption"><font style="font-size:15px"><i>Figure 8:
Returned Details for Bisphenol A</i></font></div>
</div>
</center>
</div>
</div>
<div class="section level2">
<h2 id="introduction-to-ctxr">Introduction to ctxR<a class="anchor" aria-label="anchor" href="#introduction-to-ctxr"></a>
</h2>
<p>Formatting an http request is not necessarily intuitive nor worth the
time for someone not already familiar with the process, so these
endpoints may provide a resource that for many would require a
significant investment in time and energy to learn how to use. However,
there is a solution to this in the form of the R package
<em>ctxR</em>.</p>
<p><em>ctxR</em> was developed to streamline the process of accessing
the information available through the CTX APIs without requiring prior
knowledge of how to use APIs.</p>
<div class="section level3">
<h3 id="package-settings">Package Settings<a class="anchor" aria-label="anchor" href="#package-settings"></a>
</h3>
<p>Users can run <code><a href="https://github.com/USEPA/ctxR" class="external-link">library(ctxR)</a></code> to install from CRAN or
install the development version of ctxR like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span>, logical.return <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">devtools</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"USEPA/ctxR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="api-key-storage">API Key Storage<a class="anchor" aria-label="anchor" href="#api-key-storage"></a>
</h3>
<p>As previously described, a user must have an API key to use in order
to access the CTX APIs. A <em>FREE</em> API key can be obtained by
emailing the <a href="mailto:ccte_api@epa.gov">CTX API Admins</a>. In
the example code, the API key will be stored as the variable
<code>my_key</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_key</span> <span class="op">&lt;-</span> <span class="st">'YOUR_CTX_API_key'</span></span></code></pre></div>
<p>For general use of the package, the user may use the function
<code><a href="../reference/register_ctx_api_key.html">register_ctx_api_key()</a></code> to store the API key in the current
session or more permanently for access across sessions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This stores the key in the current session</span></span>
<span><span class="fu"><a href="../reference/register_ctx_api_key.html">register_ctx_api_key</a></span><span class="op">(</span>key <span class="op">=</span> <span class="st">'&lt;YOUR API KEY&gt;'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This stores the key across multiple sessions and only needs to be run once. If the key changes, rerun this with the new key.</span></span>
<span><span class="fu"><a href="../reference/register_ctx_api_key.html">register_ctx_api_key</a></span><span class="op">(</span>key <span class="op">=</span> <span class="st">'&lt;YOUR API KEY&gt;'</span>, write <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Once the API key is stored, the default display setting is turned off
for protection. To change this, use the following functions as
demonstrated.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To show the API key</span></span>
<span><span class="fu"><a href="../reference/register_ctx_api_key.html">ctxR_show_api_key</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">'ctxR'</span><span class="op">)</span><span class="op">$</span><span class="va">display_api_key</span></span>
<span></span>
<span><span class="co"># To hide the API key</span></span>
<span><span class="fu"><a href="../reference/register_ctx_api_key.html">ctxR_hide_api_key</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">'ctxR'</span><span class="op">)</span><span class="op">$</span><span class="va">display_api_key</span></span></code></pre></div>
<p>Finally, to access the key, use the <code><a href="../reference/register_ctx_api_key.html">ctx_key()</a></code>
function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/register_ctx_api_key.html">ctx_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="quick-start-examples">Quick Start Examples<a class="anchor" aria-label="anchor" href="#quick-start-examples"></a>
</h2>
<p>As some quick start examples, we demonstrate the ease* of retrieving
the information across endpoints for Bisphenol A using <em>ctxR</em>.
*This is in contrast to the approach using the CCD or API web
interface.</p>
<p>Tables output in each example have been filtered to only display the
first few rows of data. For additional examples and more comprehensive
documentation on each endpoint, consider reviewing the other ctxR
vignettes for the data domain of interest.</p>
<div class="section level3">
<h3 id="chemical-api">Chemical API<a class="anchor" aria-label="anchor" href="#chemical-api"></a>
</h3>
<p>In this section, several ctxR functions are used to access different
types of information from the <a href="https://api-ccte.epa.gov/docs/chemical.html#/" class="external-link">CTX Chemical
API</a>.</p>
<div class="section level4">
<h4 id="chemical-details-resource">Chemical Details Resource<a class="anchor" aria-label="anchor" href="#chemical-details-resource"></a>
</h4>
<p>The function <code><a href="../reference/get_chemical_details.html">get_chemical_details()</a></code> takes in either the
DTXSID or DTXCID of a chemical and the user-specific API key. Relevant
chemical details for Bisphenol A, which has DTXSID “DTXSID7020182”, are
obtained in a data.table.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_chemical_details.html">get_chemical_details</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">'DTXSID7020182'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="chemical-property-resource">Chemical Property Resource<a class="anchor" aria-label="anchor" href="#chemical-property-resource"></a>
</h4>
<p>The function <code><a href="../reference/get_chem_info.html">get_chem_info()</a></code> returns phys-chem
properties for the selected chemical, and can be filtered to
‘experimental’ or ‘predicted’ if desired.</p>
<p>Here all phys-chem properties are returned for Bisphenol A.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_chem_info.html">get_chem_info</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">"DTXSID7020182"</span><span class="op">)</span></span></code></pre></div>
<p>Request can be filtered to return experimental results only.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_info_experimental</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_chem_info.html">get_chem_info</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">"DTXSID7020182"</span>, type <span class="op">=</span> <span class="st">'experimental'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="hazard-api">Hazard API<a class="anchor" aria-label="anchor" href="#hazard-api"></a>
</h3>
<p>In this section, several ctxR functions are used to access different
types of information from the <a href="https://api-ccte.epa.gov/docs/hazard.html#/" class="external-link">CTX Hazard
API</a>.</p>
<div class="section level4">
<h4 id="hazard-resource">Hazard Resource<a class="anchor" aria-label="anchor" href="#hazard-resource"></a>
</h4>
<p>The function <code><a href="../reference/get_hazard_by_dtxsid.html">get_hazard_by_dtxsid()</a></code> retrieves hazard
data (all human or ecological toxicity data) for a given chemical based
on input DTXSID. <code><a href="../reference/get_human_hazard_by_dtxsid.html">get_human_hazard_by_dtxsid()</a></code> and
<code><a href="../reference/get_ecotox_hazard_by_dtxsid.html">get_ecotox_hazard_by_dtxsid()</a></code> can filter returned hazard
results for the given chemical to human or ecological toxicity data,
respectively.</p>
<p>Here all hazard data is returned for Bisphenol A:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hazard_by_dtxsid.html">get_hazard_by_dtxsid</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">'DTXSID7020182'</span><span class="op">)</span></span></code></pre></div>
<p>Request can be refined to return results for human hazard,</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_human_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_human_hazard_by_dtxsid.html">get_human_hazard_by_dtxsid</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">'DTXSID7020182'</span><span class="op">)</span></span></code></pre></div>
<p>or EcoTox results.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_eco_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ecotox_hazard_by_dtxsid.html">get_ecotox_hazard_by_dtxsid</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">'DTXSID7020182'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="bioactivity-api">Bioactivity API<a class="anchor" aria-label="anchor" href="#bioactivity-api"></a>
</h3>
<p>In this section, several ctxR functions are used to access different
types of information from the <a href="https://api-ccte.epa.gov/docs/bioactivity.html#/" class="external-link">CTX Bioactivity
API</a>.</p>
<div class="section level4">
<h4 id="bioactivity-resource">Bioactivity Resource<a class="anchor" aria-label="anchor" href="#bioactivity-resource"></a>
</h4>
<p>The function <code><a href="../reference/get_bioactivity_details.html">get_bioactivity_details()</a></code> retrieves all
bioactivity data for a given chemical based on input DTXSID.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpa_bioactivity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bioactivity_details.html">get_bioactivity_details</a></span><span class="op">(</span>DTXSID <span class="op">=</span> <span class="st">'DTXSID7020182'</span><span class="op">)</span></span></code></pre></div>
<p>The function <code><a href="../reference/get_bioactivity_details.html">get_bioactivity_details()</a></code> can also be used
to retrieve all bioactivity data for a given endpoint, based on input
AEID (assay endpoint identifier).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">assay_id_search</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bioactivity_details.html">get_bioactivity_details</a></span><span class="op">(</span>AEID <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The <em>ctxR</em> package provides a streamlined approach to
accessing data from the CCD for users with little or no prior experience
using APIs.</p>
<p>For additional examples and more comprehensive documentation on each
endpoint, consider reviewing the other ctxR vignettes for the data
domain of interest.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Kruse, Caroline Ring.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
